<h1>Coin API</h1>

<mat-accordion>

    <mat-expansion-panel (opened)="panelOpenState.set(true)" (closed)="panelOpenState.set(false)">

        <mat-expansion-panel-header>

            <mat-panel-title [ngClass]="{'accordion-title-open' : panelOpenState()}">
                Filters
            </mat-panel-title>

            <mat-panel-description *ngIf="!panelOpenState()">
                <span *ngIf="form.value.nameFilter">{{ form.value.nameFilter.split(',').join(' | ') }}</span>
                <span *ngIf="form.value.nameFilter && form.value.assetIdFilter">&nbsp;|&nbsp;</span>
                <span *ngIf="form.value.assetIdFilter">{{ form.value.assetIdFilter.split(',').join(' | ') }}</span>
            </mat-panel-description>

        </mat-expansion-panel-header>

        <form class="login-form data-form" [formGroup]="form">

            <mat-form-field class="filter-form-field">

                <mat-label>
                    Filter by Name
                </mat-label>

                <input matInput type="text" name="nameFilter" [placeholder]="placeHolders.nameFilter" formControlName="nameFilter" />

                <button matSuffix mat-icon-button aria-label="Clear" (click)="form.controls['nameFilter'].setValue('')" *ngIf="form.value.nameFilter">
                    <mat-icon>close</mat-icon>
                </button>

            </mat-form-field>

            <mat-form-field class="filter-form-field">

                <mat-label>
                    Filter by Asset ID
                </mat-label>

                <input matInput type="text" name="assetIdFilter" [placeholder]="placeHolders.assetIdFilter" formControlName="assetIdFilter" />

                <button matSuffix mat-icon-button aria-label="Clear" (click)="form.controls['assetIdFilter'].setValue('')" *ngIf="form.value.assetIdFilter">
                    <mat-icon>close</mat-icon>
                </button>

            </mat-form-field>

        </form>
        
    </mat-expansion-panel>

</mat-accordion>

<mat-list>
    <div mat-subheader>Assets</div>

    <mat-divider></mat-divider>
<!-- 
    <mat-list-item *ngFor="let d of (data$ | async)!">
        <mat-icon matListItemIcon>{{ d.type_is_crypto ? 'currency_bitcoin' : '' }}</mat-icon>
        <div matListItemTitle>{{ d.name }}</div>
        <div matListItemLine>{{ d.asset_id }}</div>
    </mat-list-item>
 -->
    <mat-selection-list>
        <mat-list-option *ngFor="let d of (data$ | async)!">
            <mat-icon matListItemIcon>{{ d.type_is_crypto ? 'currency_bitcoin' : '' }}</mat-icon>
            <div matListItemTitle>{{ d.name }}</div>
            <div matListItemLine>{{ d.asset_id }}</div>
        </mat-list-option>
    </mat-selection-list>

</mat-list>

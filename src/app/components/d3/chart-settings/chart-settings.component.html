<div class="container">

    <div class="header-row" cdkDrag cdkDragRootElement=".cdk-overlay-pane" cdkDragHandle>
        <h1>Chart Settings</h1>
        <button
            mat-mini-fab
            matTooltip="Close Form"
            matTooltipPosition="above"
            (click)="handleClose()"
            class="close-button"
        >
            <mat-icon>close</mat-icon>
        </button>
    </div>

    <mat-dialog-content [formGroup]="form">

        <mat-tab-group>

            <!-- Chart Type Tab -->
            <mat-tab label="Chart Type">

                <div class="tab-container">

                    <mat-radio-group formControlName="chartType">

                        <mat-radio-button value="line" (click)="onRadioClick($event)">
                            Line
                        </mat-radio-button>

                        <mat-radio-button value="bar" (click)="onRadioClick($event)">
                            Bar
                        </mat-radio-button>

                    </mat-radio-group>

                </div>

            </mat-tab>

            <!-- Line Tab -->
            <mat-tab label="Line" *ngIf="form.value.chartType === 'line'">
                <app-line-options
                    [group]="lineGroup"
                    [markerColour]="form.value.markers.colour"
                    (setColourOutput)="setColourFromChild($event)"
                />
             </mat-tab>

            <!-- Markers Tab -->
            <mat-tab label="Markers" *ngIf="form.value.chartType === 'line'">
                <app-marker-options
                    [group]="markerGroup"
                    [lineColour]="form.value.line.colour"
                    (setColourOutput)="setColourFromChild($event)"
                />
            </mat-tab>

            <!-- Bars Tab -->
            <mat-tab label="Bar" *ngIf="form.value.chartType === 'bar'">
                <app-bar-options
                    [group]="barGroup"
                    [lineColour]="form.value.line.colour"
                    (setColourOutput)="setColourFromChild($event)"
                />
            </mat-tab>

            <!-- Dimensions Tab -->
            <mat-tab label="Dimensions">

                <div class="tab-container">

                    <!-- Chart Size -->
                    <div formGroupName="dimensions">
                        <div class="full-width form-row">

                            <!-- Width -->
                            <mat-form-field>

                                <mat-label>
                                    Chart Width (Max {{ options.dimensions.width }})
                                </mat-label>

                                <input
                                    matInput
                                    type="number"
                                    placeholder="Chart Width"
                                    formControlName="width"
                                    appearance="fill"
                                    step="10"
                                    min="0"
                                    [max]="options.dimensions.width"
                                />

                            </mat-form-field>

                            <!-- Height -->
                            <mat-form-field>

                                <mat-label>
                                    Chart Height (Max {{ options.dimensions.height }})
                                </mat-label>

                                <input
                                    matInput
                                    type="number"
                                    placeholder="Chart Height"
                                    formControlName="height"
                                    appearance="fill"
                                    step="10"
                                    min="0"
                                    [max]="options.dimensions.height"
                                />

                            </mat-form-field>

                        </div>
                    </div>

                    <mat-divider />

                    <!-- Margins -->
                    <div formGroupName="margins">

                        <div class="full-width form-row">

                            <!-- Top Margin -->
                            <mat-form-field>

                                <mat-label>
                                    Top Margin
                                </mat-label>

                                <input
                                    matInput
                                    type="number"
                                    placeholder="Top Margin"
                                    formControlName="top"
                                    appearance="fill"
                                    step="10"
                                    min="0"
                                />

                            </mat-form-field>

                            <!-- Bottom Margin -->
                            <mat-form-field>

                                <mat-label>
                                    Bottom Margin
                                </mat-label>

                                <input
                                    matInput
                                    type="number"
                                    placeholder="Bottom Margin"
                                    formControlName="bottom"
                                    appearance="fill"
                                    step="10"
                                    min="0"
                                />

                            </mat-form-field>

                        </div>

                        <div class="full-width form-row">

                            <!-- Left Margin -->
                            <mat-form-field>

                                <mat-label>
                                    Left Margin
                                </mat-label>

                                <input
                                    matInput
                                    type="number"
                                    placeholder="Left Margin"
                                    formControlName="left"
                                    appearance="fill"
                                    step="10"
                                    min="0"
                                />

                            </mat-form-field>

                            <!-- Right Margin -->
                            <mat-form-field>

                                <mat-label>
                                    Right Margin
                                </mat-label>

                                <input
                                    matInput
                                    type="number"
                                    placeholder="Right Margin"
                                    formControlName="right"
                                    appearance="fill"
                                    step="10"
                                    min="0"
                                />

                            </mat-form-field>

                        </div>
                    </div>

                </div>

            </mat-tab>

        </mat-tab-group>

    </mat-dialog-content>

</div>
